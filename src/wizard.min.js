class Wizard{constructor(a){let b={wz_class:".wizard",wz_nav:".wizard-nav",wz_ori:".horizontal",wz_nav_style:"dots",wz_content:".wizard-content",wz_buttons:".wizard-buttons",wz_button:".wizard-btn",wz_button_style:".btn",wz_step:".wizard-step",wz_form:".wizard-form",wz_next:".next",wz_prev:".prev",wz_finish:".finish",current_step:0,steps:0,navigation:"all",buttons:!0,next:"Next",prev:"Prev",finish:"Submit",i18n:{empty_wz:"Not found any element to generate the Wizard with.",empty_nav:"Nav does not exist or is empty.",empty_content:"Content does not exist or is empty.",diff_steps:"Discordance between the steps of nav and content.",random:"There has been a problem, check the configuration and use of the wizard.",already_definded:"This item is already defined",title:"Step"}};this.prefabOpts(b,a),this.wz_class=this.options.wz_class,this.wz_active="active",this.wz_ori=this.options.wz_ori,this.wz_nav=this.options.wz_nav,this.wz_nav_style=this.options.wz_nav_style,this.wz_content=this.options.wz_content,this.wz_buttons=this.options.wz_buttons,this.wz_button=this.options.wz_button,this.wz_button_style=this.options.wz_button_style,this.wz_step=this.options.wz_step,this.wz_form=this.options.wz_form,this.wz_next=this.options.wz_next,this.wz_prev=this.options.wz_prev,this.wz_finish=this.options.wz_finish,this.steps=this.options.steps,this.current_step=this.options.current_step,this.last_step=this.current_step,this.navigation=this.options.navigation,this.buttons=this.options.buttons,this.prev=this.options.prev,this.next=this.options.next,this.finish=this.options.finish,this.form=!1,this.locked=!1,this.locked_step=null}init(){try{let a=$_.exists($_.getSelector(this.wz_class))?$_.getSelector(this.wz_class):$_.throwException(this.options.i18n.empty_wz);if($_.str2bool(a.getAttribute("data-wizard"))&&a.getAttribute("data-wizard")===this.wz_active)return console.warn(`${this.wz_class} => ${this.options.i18n.already_definded}`),!1;$_.cleanEvents($_.getSelector(this.wz_class),!0),a=$_.exists($_.getSelector(this.wz_class))?$_.getSelector(this.wz_class):$_.throwException(this.options.i18n.empty_wz),a.classList.add(this.wz_ori.replace(".","")),a.tagName==="FORM"&&(this.form=!0),this.setNav(a);let d=$_.exists($_.getSelector(this.wz_nav,a))?$_.getSelector(this.wz_nav,a):$_.throwException(this.options.i18n.empty_nav),f=$_.exists($_.getSelector(this.wz_content,a))?$_.getSelector(this.wz_content,a):$_.throwException(this.options.i18n.empty_content);const b=$_.getSelectorAll(this.wz_step,d),e=b.length>0?b.length:$_.throwException(this.options.i18n.empty_nav),c=$_.getSelectorAll(this.wz_step,f),g=c.length>0?c.length:$_.throwException(this.options.i18n.empty_content);switch(e!=g&&$_.throwException(this.options.i18n.diff_steps),this.steps=e,this.prefabSteps(d,b,c),this.navigation){case"all":case"nav":this.setNavEvent(),this.setBtnEvent();break;case"buttons":this.setBtnEvent();break}a.style.display=$_.hasClass(a,"vertical")?"flex":"block",a.setAttribute("data-wizard",this.wz_active),document.dispatchEvent(new CustomEvent("readyWizard",{detail:{target:this.wz_class,elem:$_.getSelector(this.wz_class)}}))}catch(a){throw a}}prefabSteps(e,a,c){let d=!1,b=0;for(let e=0;e<a.length;e++){let f=a[e];d=d===!1?$_.hasClass(f,"active"):d,b=$_.hasClass(f,"active")?e:b,f.setAttribute("data-step",e),c[e].setAttribute("data-step",e)}$_.removeClassList(a,"active"),a[b].classList.add("active"),$_.removeClassList(c,"active"),c[b].classList.add("active"),e.classList.add(this.wz_nav_style),this.setButtons()}reset(){this.setCurrentStep(0);let a=$_.getSelector(this.wz_class),b=$_.getSelector(this.wz_nav,a),c=$_.getSelector(this.wz_content,a);if($_.str2bool(this.buttons)!==!1){let b=$_.getSelector(this.wz_buttons,a),c=$_.getSelector(this.wz_button+this.wz_next,b),d=$_.getSelector(this.wz_button+this.wz_prev,b),e=$_.getSelector(this.wz_button+this.wz_finish,b);this.checkButtons(c,d,e)}let d=$_.getSelectorAll(this.wz_step,b);$_.removeClassList(d,"active");let e=$_.getSelectorAll(this.wz_step,c);$_.removeClassList(e,"active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,b).classList.add("active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,c).classList.add("active"),$_.getSelector(this.wz_class).dispatchEvent(new Event("resetWizard"))}lock(){this.locked=!0,this.locked_step=this.getCurrentStep()}unlock(){this.locked=!1,this.locked_step=null,$_.getSelector(this.wz_class).dispatchEvent(new Event("unlockWizard"))}update2Form(){let b=$_.getSelector(this.wz_class),a=$_.getSelector(this.wz_content,b);if(a.tagName!=="FORM"){let d=a.getAttribute("class"),e=a.innerHTML;a.remove();const c=document.createElement("form");c.setAttribute("method","POST"),c.setAttribute("class",d+" "+this.wz_form.replace(".","")),c.innerHTML=e,b.appendChild(c)}}checkForm(){let c=$_.getSelector(this.wz_class),d=$_.getSelector(this.wz_content,c),e=$_.getSelectorAll(this.wz_step,d),f=e[this.getCurrentStep()],a=!1,b=$_.getSelectorAll("input,textarea,select",f);return b.length>0?a=$_.formValidator(b):this.throwException(this.options.i18n.random),a}setNav(a){let b=$_.getSelector(this.wz_nav,a);if($_.exists(b)===!1){let c=$_.getSelector(this.wz_content,a),d=$_.getSelectorAll(this.wz_step,c);const b=document.createElement("ASIDE");b.classList.add(this.wz_nav.replace(".",""));const e=$_.getSelectorAll(this.wz_step,c),f=e.length;for(let a=0;a<f;a++){const c=document.createElement("DIV");let h=d[a].hasAttribute("data-title")?d[a].getAttribute("data-title"):`${this.options.i18n.title} ${a}`;c.classList.add(this.wz_step.replace(".","")),this.navigation==="buttons"&&c.classList.add("nav-buttons");const e=document.createElement("SPAN");e.classList.add('dot'),c.appendChild(e);const g=document.createElement("SPAN");g.innerHTML=h,c.appendChild(g),b.appendChild(c)}a.prepend(b)}}setButtons(){let a=$_.getSelector(this.wz_class),b=$_.getSelector(this.wz_buttons,a);if($_.exists(b)===!1&&$_.str2bool(this.buttons)!==!1){const e=document.createElement("ASIDE");e.classList.add(this.wz_buttons.replace(".",""));let f=this.wz_button_style.replaceAll(".","");f=f.split(" ");const b=document.createElement("BUTTON");b.innerHTML=this.prev,b.classList.add(this.wz_button.replace(".","")),b.classList.add(...f),b.classList.add(this.wz_prev.replace(".","")),this.navigation==="nav"&&(b.style.display="none"),e.appendChild(b);const c=document.createElement("BUTTON");c.innerHTML=this.next,c.classList.add(this.wz_button.replace(".","")),c.classList.add(...f),c.classList.add(this.wz_next.replace(".","")),this.navigation==="nav"&&(c.style.display="none"),e.appendChild(c);const d=document.createElement("BUTTON");d.innerHTML=this.finish,d.classList.add(this.wz_button.replace(".","")),d.classList.add(...f),d.classList.add(this.wz_finish.replace(".","")),e.appendChild(d),this.checkButtons(c,b,d),a.appendChild(e)}}checkButtons(a,b,c){let d=this.getCurrentStep(),e=this.steps-1;d==0?b.setAttribute("disabled",!0):b.removeAttribute("disabled"),d==e?(a.setAttribute("disabled",!0),c.style.display="block"):(c.style.display="none",a.removeAttribute("disabled"))}onClick(g){const b=g;if(this.locked&&this.locked_step===this.getCurrentStep())return $_.getSelector(this.wz_class).dispatchEvent(new Event("lockWizard")),!1;const c=$_.getParent(b,this.wz_class),e=$_.getSelector(this.wz_nav,c),f=$_.getSelector(this.wz_content,c),h=$_.hasClass(b,this.wz_button),i=$_.hasClass(b,this.wz_step);let a=$_.str2bool(b.getAttribute("data-step"))!==!1?parseInt(b.getAttribute("data-step")):this.getCurrentStep();h&&($_.hasClass(b,this.wz_prev)?(a=a-1,$_.getSelector(this.wz_class).dispatchEvent(new Event("prevWizard"))):$_.hasClass(b,this.wz_next)&&(a=a+1,$_.getSelector(this.wz_class).dispatchEvent(new Event("nextWizard"))));let d=a>this.getCurrentStep();if(i&&(d?$_.getSelector(this.wz_class).dispatchEvent(new Event("forwardNavWizard")):a<this.getCurrentStep()&&$_.getSelector(this.wz_class).dispatchEvent(new Event("backwardNavWizard"))),this.form&&this.navigation!="buttons"&&d&&a!==this.getCurrentStep()+1&&(a>=this.last_step?a=this.last_step:a=this.getCurrentStep()+1),this.form){if(this.checkForm()===!0){if(d&&$_.getSelector(this.wz_class).dispatchEvent(new Event("errorFormValidatorWizard")),this.last_step=this.getCurrentStep(),this.getCurrentStep()<a)return!1}}if($_.str2bool(a)&&this.setCurrentStep(a),$_.str2bool(this.buttons)!==!1){const a=$_.getSelector(this.wz_buttons,c),b=$_.getSelector(this.wz_button+this.wz_next,a),d=$_.getSelector(this.wz_button+this.wz_prev,a),e=$_.getSelector(this.wz_button+this.wz_finish,a);this.checkButtons(b,d,e)}const j=$_.getSelectorAll(this.wz_step,e);$_.removeClassList(j,"active");const k=$_.getSelectorAll(this.wz_step,f);$_.removeClassList(k,"active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,e).classList.add("active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,f).classList.add("active")}onClickFinish(a){this.form?this.checkForm()!==!0&&$_.getSelector(this.wz_class).dispatchEvent(new Event("submitWizard")):$_.getSelector(this.wz_class).dispatchEvent(new Event("endWizard"))}setCurrentStep(a){this.current_step=this.setStep(a)}getCurrentStep(){return this.current_step}setStep(a){let c=$_.getSelector(this.wz_class),b=$_.getSelector(this.wz_content,c),d=$_.getSelector(`${this.wz_step}[data-step="${a}"]`,b);if($_.exists(d)===!1){let c=$_.getSelectorAll(this.wz_step,b).length-1,d=$_.closetNubmer(c,a);a=d}return this.last_step=a>this.last_step?a:this.last_step,parseInt(a)}setNavEvent(){let a=this,b=$_.getSelector(this.wz_class);$_.delegate(b,"click",`${this.wz_nav} ${this.wz_step}`,function(b){b.preventDefault(),a.onClick(this)})}setBtnEvent(){let a=this,b=$_.getSelector(this.wz_class);$_.delegate(b,"click",`${this.wz_buttons} ${this.wz_button}`,function(b){b.preventDefault(),$_.hasClass(b.target,a.wz_finish)?a.onClickFinish(this):a.onClick(this)})}set_options(a){this.options=a}prefabOpts(a,b){Object.entries(b).forEach(([c,b])=>{typeof b=='object'?Object.entries(b).forEach(([b,d])=>{a[c][b]=d}):a[c]=b}),this.set_options(a)}}const $_={getID:function(a,b=document){return b.getElementById(a)},getClass:function(a,b=document){return b.getElementsByClassName(a)},getTag:function(a,b=document){return b.getElementsByTagName(a)},getSelector:function(a,b=document){return b.querySelector(a)},getSelectorAll:function(a,b=document){return b.querySelectorAll(a)},hasClass:function(b,a){return a=a.replace(".",""),new RegExp('(\\s|^)'+a+'(\\s|$)').test(b.className)},getParent:function(a,c){let b=void 0;while(a.parentNode.tagName!=="BODY"&&b===void 0)a=a.parentNode,a.matches(c)&&(b=a);return b},delegate:function(a,b,c,d){a.addEventListener(b,function(b){let a=b.target;while(a&&a!==this)a.matches(c)&&d.call(a,b),a=a.parentNode})},removeClassList:function(a,b){for(let c of a)c.classList.remove(b)},objToString:function(a,c=";"){let b='';for(const d in a)a.hasOwnProperty(d)&&(b+=d+':'+a[d]+c);return b},isHidden:function(a){const b=window.getComputedStyle(a);return b.display==='none'},str2bool:function(a){const b=String(a);switch(b.toLowerCase()){case'false':case'no':case'n':case'':case'null':case'undefined':return!1;default:return!0}},exists:function(a){return typeof a!='undefined'&&a!=null},throwException:function(c){let b;try{throw new Error('myError')}catch(a){b=a}if(!b)return;let a=b.stack.split("\n");throw a.splice(0,2),a=a.join('\n"'),c+' \n'+a},formValidator:function(b){let a=!1;for(let c of b)if($_.hasClass(c,"required")||$_.exists(c.getAttribute("required"))){let b=!1;switch(c.tagName){case"INPUT":b=$_.dispatchInput(c);break;case"SELECT":case"TEXTAREA":b=$_.isEmpty(c.value);break}b===!1&&(a=!0,$_.highlight(c,"error"))}return a},closetNubmer:function(c,a){let b=[];for(let a=0;a<=c;a++)b.push(a);let d=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b});return d},highlight:function(a,b="error"){let c=`highlight-${b}`;a.classList.add(c),setTimeout(function(){document.querySelectorAll('[class*="highlight"]').forEach(a=>{for(let b=a.classList.length-1;b>=0;b--){let c=a.classList[b];c.startsWith('highlight')&&a.classList.remove(c)}})},1e3)},dispatchInput:function(a){let c=a.getAttribute("type"),b=!1;switch(c){case"email":b=$_.isEmail(a.value);break;case"url":b=$_.isValidURL(a.value);break;case"checkbox":case"radio":b=a.checked;break;default:b=$_.isEmpty(a.value);break}return b},isEmpty:function(a){return a!=void 0&&a!=null&&a.length>0},isEmail:function(a){const b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},isValidURL:function(b){let a;try{a=new URL(b)}catch(a){return!1}return a.protocol==="http:"||a.protocol==="https:"},cleanEvents:function(a,b=!1){if($_.exists(a))if(b)a.parentNode.replaceChild(a.cloneNode(!0),a);else{const b=a.cloneNode(!1);while(a.hasChildNodes())b.appendChild(a.firstChild);a.parentNode.replaceChild(b,a)}}}