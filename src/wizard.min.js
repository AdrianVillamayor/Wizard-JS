class Wizard{constructor(a){let b={wz_class:".wizard",wz_nav:".wizard-nav",wz_ori:".horizontal",wz_nav_style:"dots",wz_content:".wizard-content",wz_buttons:".wizard-buttons",wz_button:".wizard-btn",wz_button_style:".btn",wz_step:".wizard-step",wz_form:".wizard-form",wz_next:".next",wz_prev:".prev",wz_finish:".finish",current_step:0,steps:0,navigation:"all",buttons:!0,next:"Next",prev:"Prev",finish:"Submit",i18n:{empty_wz:"Not found any element to generate the Wizard with.",empty_nav:"Nav does not exist or is empty.",empty_content:"Content does not exist or is empty.",diff_steps:"Discordance between the steps of nav and content.",random:"There has been a problem, check the configuration and use of the wizard.",title:"Step"}};this.prefabOpts(b,a),this.wz_class=this.options.wz_class,this.wz_ori=this.options.wz_ori,this.wz_nav=this.options.wz_nav,this.wz_nav_style=this.options.wz_nav_style,this.wz_content=this.options.wz_content,this.wz_buttons=this.options.wz_buttons,this.wz_button=this.options.wz_button,this.wz_button_style=this.options.wz_button_style,this.wz_step=this.options.wz_step,this.wz_form=this.options.wz_form,this.wz_next=this.options.wz_next,this.wz_prev=this.options.wz_prev,this.wz_finish=this.options.wz_finish,this.steps=this.options.steps,this.current_step=this.options.current_step,this.last_step=this.current_step,this.navigation=this.options.navigation,this.buttons=this.options.buttons,this.prev=this.options.prev,this.next=this.options.next,this.finish=this.options.finish,this.form=!1,this.locked=!1,this.locked_step=null}init(){try{$_.cleanEvents($_.getSelector(this.wz_class),!0);let a=$_.exists($_.getSelector(this.wz_class))?$_.getSelector(this.wz_class):$_.throwException(this.options.i18n.empty_wz);a.classList.add(this.wz_ori.replace(".","")),"FORM"===a.tagName&&(this.form=!0),this.setNav(a);let d=$_.exists($_.getSelector(this.wz_nav,a))?$_.getSelector(this.wz_nav,a):$_.throwException(this.options.i18n.empty_nav),f=$_.exists($_.getSelector(this.wz_content,a))?$_.getSelector(this.wz_content,a):$_.throwException(this.options.i18n.empty_content);var b=$_.getSelectorAll(this.wz_step,d),e=b.length>0?b.length:$_.throwException(this.options.i18n.empty_nav),c=$_.getSelectorAll(this.wz_step,f),g=c.length>0?c.length:$_.throwException(this.options.i18n.empty_content);switch(e!=g&&$_.throwException(this.options.i18n.diff_steps),"nav"===this.navigation&&(this.buttons=!1),this.steps=e,this.prefabSteps(d,b,c),this.navigation){case"all":case"nav":this.setNavEvent(),this.setBtnEvent();break;case"buttons":this.setBtnEvent()}a.style.display=$_.hasClass(a,"vertical")?"flex":"block"}catch(h){throw h}}prefabSteps(g,b,d){var e=!1,c=0;for(let a=0;a<b.length;a++){let f=b[a];e=!1===e?$_.hasClass(f,"active"):e,c=$_.hasClass(f,"active")?a:c,f.setAttribute("data-step",a),d[a].setAttribute("data-step",a)}$_.removeClassList(b,"active"),b[c].classList.add("active"),$_.removeClassList(d,"active"),d[c].classList.add("active"),g.classList.add(this.wz_nav_style),this.setButtons()}reset(){this.setCurrentStep(0);let a=$_.getSelector(this.wz_class),c=$_.getSelector(this.wz_nav,a),d=$_.getSelector(this.wz_content,a),b=$_.getSelector(this.wz_buttons,a),e=$_.getSelector(this.wz_button+this.wz_next,b),f=$_.getSelector(this.wz_button+this.wz_prev,b),g=$_.getSelector(this.wz_button+this.wz_finish,b);this.checkButtons(e,f,g);let h=$_.getSelectorAll(this.wz_step,c);$_.removeClassList(h,"active");let i=$_.getSelectorAll(this.wz_step,d);$_.removeClassList(i,"active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,c).classList.add("active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,d).classList.add("active"),$_.getSelector(this.wz_class).dispatchEvent(new Event("resetWizard"))}lock(){this.locked=!0,this.locked_step=this.getCurrentStep()}unlock(){this.locked=!1,this.locked_step=null,$_.getSelector(this.wz_class).dispatchEvent(new Event("unlockWizard"))}update2Form(){let c=$_.getSelector(this.wz_class),a=$_.getSelector(this.wz_content,c);if("FORM"!==a.tagName){let d=a.getAttribute("class"),e=a.innerHTML;a.remove();var b=document.createElement("form");b.setAttribute("method","POST"),b.setAttribute("class",d+" "+this.wz_form.replace(".","")),b.innerHTML=e,c.appendChild(b)}}checkForm(){let c=$_.getSelector(this.wz_class),d=$_.getSelector(this.wz_content,c),e=$_.getSelectorAll(this.wz_step,d),f=e[this.getCurrentStep()];var a=!1;let b=$_.getSelectorAll("input,textarea,select",f);return b.length>0?a=$_.formValidator(b):this.throwException(this.options.i18n.random),a}setNav(c){let i=$_.getSelector(this.wz_nav,c);if(!1===$_.exists(i)){let e=$_.getSelector(this.wz_content,c),f=$_.getSelectorAll(this.wz_step,e);var d=document.createElement("ASIDE");d.classList.add(this.wz_nav.replace(".",""));for(var j=$_.getSelectorAll(this.wz_step,e).length,a=0;a<j;a++){var b=document.createElement("DIV");let k=f[a].hasAttribute("data-title")?f[a].getAttribute("data-title"):`${this.options.i18n.title} ${a}`;b.classList.add(this.wz_step.replace(".",""));var g=document.createElement("SPAN");g.classList.add("dot"),b.appendChild(g);var h=document.createElement("SPAN");h.innerHTML=k,b.appendChild(h),d.appendChild(b)}c.prepend(d)}}setButtons(){let f=$_.getSelector(this.wz_class),g=$_.getSelector(this.wz_buttons,f);if(!1===$_.exists(g)){var d=document.createElement("ASIDE");d.classList.add(this.wz_buttons.replace(".",""));var e=this.wz_button_style.replaceAll(".","");e=e.split(" ");var a=document.createElement("BUTTON");a.innerHTML=this.prev,a.classList.add(this.wz_button.replace(".","")),a.classList.add(...e),a.classList.add(this.wz_prev.replace(".","")),!1===$_.str2bool(this.buttons)&&(a.style.display="none"),d.appendChild(a);var b=document.createElement("BUTTON");b.innerHTML=this.next,b.classList.add(this.wz_button.replace(".","")),b.classList.add(...e),b.classList.add(this.wz_next.replace(".","")),!1===$_.str2bool(this.buttons)&&(b.style.display="none"),d.appendChild(b);var c=document.createElement("BUTTON");c.innerHTML=this.finish,c.classList.add(this.wz_button.replace(".","")),c.classList.add(...e),c.classList.add(this.wz_finish.replace(".","")),d.appendChild(c),this.checkButtons(b,a,c),f.appendChild(d)}}checkButtons(a,b,c){let d=this.getCurrentStep(),e=this.steps-1;0==d?b.setAttribute("disabled",!0):b.removeAttribute("disabled"),d==e?(a.setAttribute("disabled",!0),c.style.display="block"):(c.style.display="none",a.removeAttribute("disabled"))}onClick(g){let b=g;if(this.locked&&this.locked_step===this.getCurrentStep())return $_.getSelector(this.wz_class).dispatchEvent(new Event("lockWizard")),!1;let c=$_.getParent(b,this.wz_class),e=$_.getSelector(this.wz_nav,c),f=$_.getSelector(this.wz_content,c);var h=$_.hasClass(b,this.wz_button);let a=!1!==$_.str2bool(b.getAttribute("data-step"))?parseInt(b.getAttribute("data-step")):this.getCurrentStep();if(h&&($_.hasClass(b,this.wz_prev)?(a-=1,$_.getSelector(this.wz_class).dispatchEvent(new Event("prevWizard"))):$_.hasClass(b,this.wz_next)&&(a+=1,$_.getSelector(this.wz_class).dispatchEvent(new Event("nextWizard")))),this.form&&"buttons"!=this.navigation&&a>this.getCurrentStep()&&a!==this.getCurrentStep()+1&&(a=a>=this.last_step?this.last_step:this.getCurrentStep()+1),this.form&& !0===this.checkForm()&&($_.getSelector(this.wz_class).dispatchEvent(new Event("errorFormValidatorWizard")),this.last_step=this.getCurrentStep(),this.getCurrentStep()<a))return!1;$_.str2bool(a)&&this.setCurrentStep(a);let d=$_.getSelector(this.wz_buttons,c),i=$_.getSelector(this.wz_button+this.wz_next,d),j=$_.getSelector(this.wz_button+this.wz_prev,d),k=$_.getSelector(this.wz_button+this.wz_finish,d);this.checkButtons(i,j,k);let l=$_.getSelectorAll(this.wz_step,e);$_.removeClassList(l,"active");let m=$_.getSelectorAll(this.wz_step,f);$_.removeClassList(m,"active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,e).classList.add("active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,f).classList.add("active")}onClickFinish(a){this.form?!0!==this.checkForm()&&$_.getSelector(this.wz_class).dispatchEvent(new Event("submitWizard")):$_.getSelector(this.wz_class).dispatchEvent(new Event("endWizard"))}setCurrentStep(a){this.current_step=this.setStep(a)}getCurrentStep(){return this.current_step}setStep(a){let c=$_.getSelector(this.wz_class),b=$_.getSelector(this.wz_content,c),d=$_.getSelector(`${this.wz_step}[data-step="${a}"]`,b);if(!1===$_.exists(d)){let e=$_.getSelectorAll(this.wz_step,b).length-1,f=$_.closetNubmer(e,a);a=f}return this.last_step=a>this.last_step?a:this.last_step,parseInt(a)}setNavEvent(){let b=this,a=$_.getSelector(this.wz_class);$_.delegate(a,"click",`${this.wz_nav} ${this.wz_step}`,function(a){a.preventDefault(),b.onClick(this)})}setBtnEvent(){let b=this,a=$_.getSelector(this.wz_class);$_.delegate(a,"click",`${this.wz_buttons} ${this.wz_button}`,function(a){a.preventDefault(),$_.hasClass(a.target,b.wz_finish)?b.onClickFinish(this):b.onClick(this)})}set_options(a){this.options=a}prefabOpts(a,b){Object.entries(b).forEach(([c,b])=>{"object"==typeof b?Object.entries(b).forEach(([b,d])=>{a[c][b]=d}):a[c]=b}),this.set_options(a)}}var $_={getID:function(a,b=document){return b.getElementById(a)},getClass:function(a,b=document){return b.getElementsByClassName(a)},getTag:function(a,b=document){return b.getElementsByTagName(a)},getSelector:function(a,b=document){return b.querySelector(a)},getSelectorAll:function(a,b=document){return b.querySelectorAll(a)},hasClass:function(b,a){return a=a.replace(".",""),new RegExp("(\\s|^)"+a+"(\\s|$)").test(b.className)},getParent:function(a,c){for(var b=void 0;"BODY"!==a.parentNode.tagName&& void 0===b;)(a=a.parentNode).matches(c)&&(b=a);return b},delegate:function(a,b,c,d){a.addEventListener(b,function(b){for(var a=b.target;a&&a!==this;)a.matches(c)&&d.call(a,b),a=a.parentNode})},removeClassList:function(a,b){for(let c of a)c.classList.remove(b)},objToString:function(a,d=";"){var c="";for(var b in a)a.hasOwnProperty(b)&&(c+=b+":"+a[b]+d);return c},isHidden:function(a){return"none"===window.getComputedStyle(a).display},str2bool:function(a){switch((a=String(a)).toLowerCase()){case"false":case"no":case"n":case"":case"null":case"undefined":return!1;default:return!0}},exists:function(a){return void 0!==a&&null!=a},throwException:function(b){try{throw new Error("myError")}catch(c){d=c}if(d){var d,a=d.stack.split("\n");throw a.splice(0,2),b+" \n"+(a=a.join('\n"'))}},formValidator:function(d){var c=!1;for(let a of d)if($_.hasClass(a,"required")||$_.exists(a.getAttribute("required"))){var b=!1;switch(a.tagName){case"INPUT":b=$_.dispatchInput(a);break;case"SELECT":case"TEXTAREA":b=$_.isEmpty(a.value)}!1===b&&(c=!0,$_.highlight(a,"error"))}return c},closetNubmer:function(d,e){var b=[];for(let a=0;a<=d;a++)b.push(a);let c=b.reduce(function(a,b){return Math.abs(b-e)<Math.abs(a-e)?b:a});return console.log(c),c},highlight:function(a,b="error"){let c=`highlight-${b}`;a.classList.add(c),setTimeout(function(){document.querySelectorAll('[class*="highlight"]').forEach(a=>{for(let b=a.classList.length-1;b>=0;b--){let c=a.classList[b];c.startsWith("highlight")&&a.classList.remove(c)}})},1e3)},dispatchInput:function(a){let c=a.getAttribute("type");var b=!1;switch(c){case"email":b=$_.isEmail(a.value);break;case"url":b=$_.isValidURL(a.value);break;case"checkbox":case"radio":b=a.checked;break;default:b=$_.isEmpty(a.value)}return b},isEmpty:function(a){return void 0!=a&&null!=a&&a.length>0},isEmail:function(a){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)},isValidURL:function(a){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)},cleanEvents:function(a,c=!1){if($_.exists(a)){if(c)a.parentNode.replaceChild(a.cloneNode(!0),a);else{for(var b=a.cloneNode(!1);a.hasChildNodes();)b.appendChild(a.firstChild);a.parentNode.replaceChild(b,a)}}}}