let error_list={empty_wz:"Not found any element to generate the Wizard with.",empty_nav:"Nav does not exist or is empty.",empty_content:"Content does not exist or is empty.",diff_steps:"Discordance between the steps of nav and content.",random:"There has been a problem, check the configuration and use of the wizard."};class Wizard{constructor(a){let b={wz_class:a!=void 0&&a.hasOwnProperty("wz_class")?a.wz_class:".wizard",wz_nav:a!=void 0&&a.hasOwnProperty("wz_nav")?a.wz_nav:".wizard-nav",wz_nav_style:a!=void 0&&a.hasOwnProperty("wz_nav_style")?a.wz_nav_style:"dots",wz_content:a!=void 0&&a.hasOwnProperty("wz_content")?a.wz_content:".wizard-content",wz_buttons:a!=void 0&&a.hasOwnProperty("wz_buttons")?a.wz_buttons:".wizard-buttons",wz_button:a!=void 0&&a.hasOwnProperty("wz_button")?a.wz_button:".wizard-btn",wz_step:a!=void 0&&a.hasOwnProperty("wz_step")?a.wz_step:".wizard-step",wz_form:a!=void 0&&a.hasOwnProperty("wz_form")?a.wz_form:".wizard-form",wz_next:a!=void 0&&a.hasOwnProperty("next")?a.wz_next:".next",wz_prev:a!=void 0&&a.hasOwnProperty("prev")?a.wz_prev:".prev",wz_finish:a!=void 0&&a.hasOwnProperty("prev")?a.wz_prev:".finish",current_step:a!=void 0&&a.hasOwnProperty("current_step")?a.current_step:0,steps:a!=void 0&&a.hasOwnProperty("steps")?a.steps:0,navigation:a!=void 0&&a.hasOwnProperty("navigation")?a.navigation:"all",buttons:!(a!=void 0&&a.hasOwnProperty("buttons"))||a.buttons,next:a!=void 0&&a.hasOwnProperty("next")?a.next:"Next",prev:a!=void 0&&a.hasOwnProperty("prev")?a.prev:"Prev",finish:a!=void 0&&a.hasOwnProperty("finish")?a.finish:"Submit"};this.wz_class=b.wz_class,this.wz_nav=b.wz_nav,this.wz_nav_style=b.wz_nav_style,this.wz_content=b.wz_content,this.wz_buttons=b.wz_buttons,this.wz_button=b.wz_button,this.wz_step=b.wz_step,this.wz_form=b.wz_form,this.wz_next=b.wz_next,this.wz_prev=b.wz_prev,this.wz_finish=b.wz_finish,this.steps=b.steps,this.current_step=b.current_step,this.last_step=this.current_step,this.navigation=b.navigation,this.buttons=b.buttons,this.prev=b.prev,this.next=b.next,this.finish=b.finish,this.form=!1}init(){var a,c,b,d;try{let i=this,e=$_.exists($_.getSelector(this.wz_class))?$_.getSelector(this.wz_class):$_.throwException(error_list.empty_wz),f=$_.exists($_.getSelector(this.wz_nav,e))?$_.getSelector(this.wz_nav,e):$_.throwException(error_list.empty_nav),g=$_.exists($_.getSelector(this.wz_content,e))?$_.getSelector(this.wz_content,e):$_.throwException(error_list.empty_content),h=typeof e.getAttribute("data-type")!='undefined'&&e.getAttribute("data-type")!==!1?e.getAttribute("data-type"):"default";switch(a=$_.getSelectorAll(this.wz_step,f),c=a.length>0?a.length:$_.throwException(error_list.empty_nav),b=$_.getSelectorAll(this.wz_step,g),d=b.length>0?b.length:$_.throwException(error_list.empty_content),c!=d&&$_.throwException(error_list.diff_steps),this.steps=c,this.set(a,b,h),this.navigation){case"all":this.setNavEvent(),this.setBtnEvent();break;case"nav":this.setNavEvent();break;case"buttons":this.setBtnEvent();break}e.style.display="block"}catch(a){throw a}}set(a,b,e){var d=!1,c=0;for(let e=0;e<a.length;e++){let f=a[e],g=typeof f.getAttribute("data-type")!==void 0&&$_.str2bool(f.getAttribute("data-type"))!==!1?f.getAttribute("data-type"):"default";this.form=g==="form"||is_form,d=d===!1?$_.hasClass(f,"active"):d,c=$_.hasClass(f,"active")?e:c,f.setAttribute("data-step",e),b[e].setAttribute("data-step",e),f.setAttribute("data-type",g),b[e].setAttribute("data-type",g)}$_.removeClassList(a,"active"),a[c].classList.add("active"),$_.removeClassList(b,"active"),b[c].classList.add("active"),$_.getSelector(this.wz_nav).classList.add(this.wz_nav_style),this.form&&this.update2Form(),this.setButtons()}update2Form(){let c=$_.getSelector(this.wz_class),a=$_.getSelector(this.wz_content,c);if(a.tagName!=="FORM"){let d=a.getAttribute("class"),e=a.innerHTML;a.remove();var b=document.createElement("form");b.setAttribute("method","POST"),b.setAttribute("class",d+" "+this.wz_form.replace(".","")),b.innerHTML=e,c.appendChild(b)}}checkForm(){let c=$_.getSelector(this.wz_class),d=$_.getSelector(this.wz_content,c),e=$_.getSelectorAll(this.wz_step,d),f=e[this.getCurrentStep()];var a=!1;let b=$_.getSelectorAll("input,textarea,select",f);return b.length>0?a=$_.formValidator(b):this.throwException(error_list.random),a}setButtons(){var a,b,c,d;let e=$_.getSelector(this.wz_class),f=$_.getSelector(this.wz_buttons,e);return $_.exists(f)===!1&&$_.str2bool(this.buttons)&&(a=document.createElement("ASIDE"),a.classList.add(this.wz_buttons.replace(".","")),b=document.createElement("BUTTON"),b.innerHTML=this.prev,b.classList.add(this.wz_button.replace(".","")),b.classList.add(this.wz_prev.replace(".","")),a.appendChild(b),c=document.createElement("BUTTON"),c.innerHTML=this.next,c.classList.add(this.wz_button.replace(".","")),c.classList.add(this.wz_next.replace(".","")),a.appendChild(c),this.form&&(d=document.createElement("BUTTON"),d.innerHTML=this.finish,d.classList.add(this.wz_button.replace(".","")),d.classList.add(this.wz_finish.replace(".","")),a.appendChild(d)),this.checkButtons(c,b,d),e.appendChild(a)),!0}checkButtons(a,b,c){let d=this.getCurrentStep(),e=this.steps-1;d==0?b.setAttribute("disabled",!0):b.removeAttribute("disabled"),d==e?(a.setAttribute("disabled",!0),c.style.display="block"):(c.style.display="none",a.removeAttribute("disabled"))}onClick(h){let b=h,c=$_.getParent(b,this.wz_class),f=$_.getSelector(this.wz_nav,c),d=$_.getSelector(this.wz_content,c),g=$_.getSelectorAll(this.wz_step,d);var e=$_.hasClass(b,this.wz_button);let a=$_.str2bool(b.getAttribute("data-step"))!==!1?parseInt(b.getAttribute("data-step")):this.getCurrentStep(),i=g[this.getCurrentStep()].getAttribute("data-type");switch(e&&($_.hasClass(b,this.wz_prev)?(a=a-1,document.dispatchEvent(new Event("prevWizard"))):$_.hasClass(b,this.wz_next)&&(a=a+1,document.dispatchEvent(new Event("nextWizard")))),this.form&&this.navigation!="buttons"&&a>this.getCurrentStep()&&a!==this.getCurrentStep()+1&&(a>=this.last_step?a=this.last_step:a=this.getCurrentStep()+1),i){case"form":if(this.checkForm()===!0){if(this.last_step=this.getCurrentStep(),this.getCurrentStep()<a)return!1}break}if($_.str2bool(a)&&this.setCurrentStep(a),e){let a=$_.getSelector(this.wz_buttons,c),b=$_.getSelector(this.wz_button+this.wz_next,a),d=$_.getSelector(this.wz_button+this.wz_prev,a),e=$_.getSelector(this.wz_button+this.wz_finish,a);this.checkButtons(b,d,e)}let j=$_.getSelectorAll(this.wz_step,f);$_.removeClassList(j,"active");let k=$_.getSelectorAll(this.wz_step,d);$_.removeClassList(k,"active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,f).classList.add("active"),$_.getSelector(`${this.wz_step}[data-step="${this.getCurrentStep()}"]`,d).classList.add("active")}setCurrentStep(a){this.current_step=this.setStep(a)}getCurrentStep(){return this.current_step}setStep(a){let c=$_.getSelector(this.wz_class),b=$_.getSelector(this.wz_content,c),d=$_.getSelector(`${this.wz_step}[data-step="${a}"]`,b);if($_.exists(d)===!1){let c=$_.getSelectorAll(this.wz_step,b).length-1,d=this.closetNubmer(c,a);a=d}return this.last_step=a>this.last_step?a:this.last_step,parseInt(a)}closetNubmer(c,a){var b=[];for(let a=0;a<=c;a++)b.push(a);let d=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b});return d}setNavEvent(){let a=this;$_.delegate(document,"click",this.wz_nav+" "+this.wz_step,function(b){a.onClick(this)})}setBtnEvent(){let a=this;$_.delegate(document,"click",this.wz_buttons+" "+this.wz_button,function(b){$_.hasClass(b.target,a.wz_finish)?a.checkForm()!==!0&&document.dispatchEvent(new Event("submitWizard")):a.onClick(this)})}}var $_={getID:function(a,b=document){return b.getElementById(a)},getClass:function(a,b=document){return b.getElementsByClassName(a)},getTag:function(a,b=document){return b.getElementsByTagName(a)},getSelector:function(a,b=document){return b.querySelector(a)},getSelectorAll:function(a,b=document){return b.querySelectorAll(a)},hasClass:function(b,a){return a=a.replace(".",""),new RegExp('(\\s|^)'+a+'(\\s|$)').test(b.className)},getParent:function(a,c){for(var b=void 0;a.parentNode.tagName!=="BODY"&&b===void 0;)a=a.parentNode,a.matches(c)&&(b=a);return b},delegate:function(a,b,c,d){a.addEventListener(b,function(b){for(var a=b.target;a&&a!==this;)a.matches(c)&&d.call(a,b),a=a.parentNode})},removeClassList:function(a,b){for(let c of a)c.classList.remove(b)},objToString:function(a,d=";"){var c='',b;for(b in a)a.hasOwnProperty(b)&&(c+=b+':'+a[b]+d);return c},isHidden:function(a){var b=window.getComputedStyle(a);return b.display==='none'},str2bool:function(a){switch(a=String(a),a.toLowerCase()){case'false':case'no':case'n':case'':case'null':case'undefined':return!1;default:return!0}},exists:function(a){return typeof a!='undefined'&&a!=null},throwException:function(c){var b,a;try{throw new Error('myError')}catch(a){b=a}if(!b)return;throw a=b.stack.split("\n"),a.splice(0,2),a=a.join('\n"'),c+' \n'+a},formValidator:function(c){var b=!1,a;for(let d of c)if($_.hasClass(d,"required")||$_.exists(d.getAttribute("required"))){switch(a=!1,d.tagName){case"INPUT":a=$_.dispatchInput(d);break;case"SELECT":case"TEXTAREA":a=$_.isEmpty(d.value);break}a===!1&&(b=!0,console.log(d),$_.highlight(d,"error"))}return b},highlight:function(a,b="error"){let c="highlight-"+b;a.classList.add(c),setTimeout(function(){document.querySelectorAll('[class*="highlight"]').forEach(a=>{for(let b=a.classList.length-1;b>=0;b--){let c=a.classList[b];c.startsWith('highlight')&&a.classList.remove(c)}})},1e3)},dispatchInput:function(a){let c=a.getAttribute("type");var b=!1;switch(c){case"email":b=$_.isEmail(a.value);break;case"url":b=$_.isValidURL(a.value);break;case"checkbox":case"radio":b=a.checked;break;default:b=$_.isEmpty(a.value);break}return b},isEmpty:function(a){return a!=void 0&&a!=null&&a.length>0},isEmail:function(a){var b=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)},isValidURL:function(a){var b=new RegExp('^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$','i');return!!b.test(a)}}