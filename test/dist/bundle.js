!function i(n,r,a){function o(e,t){if(!r[e]){if(!n[e]){var s="function"==typeof require&&require;if(!t&&s)return s(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}s=r[e]={exports:{}},n[e][0].call(s.exports,function(t){return o(n[e][1][t]||t)},s,s.exports,i,n,r,a)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(t,e,s){var i,n;i=this,n=function(){return(i={d:function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}).d(t={},{default:function(){return e}}),e=class{constructor(){this.options={wz_class:".wizard",wz_nav:".wizard-nav",wz_ori:".horizontal",wz_nav_style:"dots",wz_content:".wizard-content",wz_buttons:".wizard-buttons",wz_button:".wizard-btn",wz_button_style:".btn",wz_step:".wizard-step",wz_form:".wizard-form",wz_next:".next",wz_prev:".prev",wz_finish:".finish",wz_highlight:".highlight-error",bubbles:!0,nav:!0,buttons:!0,highlight:!0,current_step:0,steps:0,highlight_time:1e3,navigation:"all",next:"Next",prev:"Prev",finish:"Submit",highlight_type:{error:"error",warning:"warning",success:"success",info:"info"},i18n:{empty_wz:"No item has been found with which to generate the Wizard.",empty_nav:"Nav does not exist or is empty.",empty_content:"Content does not exist or is empty.",empty_html:"Undefined or null content cannot be added.",empty_update:"Nothing to update.",no_nav:"Both the nav and the buttons are disabled, there is no navigation system.",form_validation:"One or more of the form fields are invalid.",diff_steps:"Discordance between the steps of nav and content.",random:"There has been a problem, check the configuration and use of the wizard.",already_defined:"This item is already defined",title:"Step"},...0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}};var{wz_class:t,wz_nav:e,wz_ori:s,wz_nav_style:i,wz_content:n,wz_buttons:r,wz_button:a,wz_button_style:o,wz_step:l,wz_form:c,wz_next:h,wz_prev:d,wz_finish:u,wz_highlight:w,nav:p,buttons:b,highlight:z,highlight_time:_,highlight_type:v,current_step:m,steps:f,navigation:g,prev:y,next:E,finish:S,i18n:q,bubbles:L}=this.options;Object.assign(this,{wz_class:t,wz_nav:e,wz_ori:s,wz_nav_style:i,wz_content:n,wz_buttons:r,wz_button:a,wz_button_style:o,wz_step:l,wz_form:c,wz_next:h,wz_prev:d,wz_finish:u,wz_highlight:w,nav:p,buttons:b,highlight:z,highlight_time:_,highlight_type:v,current_step:m,steps:f,navigation:g,prev:y,next:E,finish:S,i18n:q,last_step:m,form:!1,locked:!1,locked_step:null,bubbles:L})}init(){try{var t=document.querySelector(this.wz_class);if(!t)throw new Error(this.i18n.empty_wz);if("true"===t.getAttribute("data-wz-load"))console.warn(this.wz_class+" : "+this.i18n.already_defined);else{var e=t;switch(this.buttons||this.nav||console.warn(this.i18n.no_nav),e.classList.add(this.wz_ori.replace(".","")),"FORM"===e.tagName&&(this.form=!0),this.checkAndPrepare(e),this.navigation){case"all":case"nav":this.setNavEvent(),this.setBtnEvent();break;case"buttons":this.setBtnEvent()}e.style.display=e.classList.contains("vertical")?"flex":"block",e.setAttribute("data-wz-load","true"),document.dispatchEvent(new CustomEvent("wz.ready",{bubbles:this.bubbles,detail:{target:this.wz_class,elem:e}}))}}catch(t){console.error(t)}}update(){var t=document.querySelector(this.wz_class);if(!t)throw new Error(this.i18n.empty_wz);if("true"!==t.getAttribute("data-wz-load"))throw new Error(this.i18n.empty_wz);this.checkAndPrepare(t),this.content_update=!1,t.dispatchEvent(new CustomEvent("wz.update",{bubbles:this.bubbles,detail:{target:this.wz_class,elem:t}}))}reset(){this.setCurrentStep(0);let n=document.querySelector(this.wz_class),t=n.querySelector(this.wz_nav),e=n.querySelector(this.wz_content);if(this.buttons){let t=n.querySelector(this.wz_buttons),e=t.querySelector(""+this.wz_button+this.wz_next),s=t.querySelector(""+this.wz_button+this.wz_prev),i=t.querySelector(""+this.wz_button+this.wz_finish);this.checkButtons(e,s,i)}this.nav&&(t.querySelectorAll(this.wz_step).forEach(t=>t.classList.remove("active")),t.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")),e.querySelectorAll(this.wz_step).forEach(t=>t.classList.remove("active")),e.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active"),n.dispatchEvent(new Event("wz.reset",{bubbles:this.bubbles}))}lock(){this.locked=!0,this.locked_step=this.getCurrentStep()}unlock(){this.locked=!1,this.locked_step=null,document.querySelector(this.wz_class).dispatchEvent(new Event("wz.unlock",{bubbles:this.bubbles}))}prefabSteps(t,e,s){var i=this.getCurrentStep();t.forEach((t,e)=>{t.setAttribute("data-wz-step",e),this.nav&&s[e].setAttribute("data-wz-step",e)}),this.nav&&(s.forEach(t=>t.classList.remove("active")),s[i].classList.add("active"),e.classList.add(this.wz_nav_style)),t.forEach(t=>t.classList.remove("active")),t[i].classList.add("active"),this.setButtons()}updateToForm(){var t,e,s=document.querySelector(this.wz_class),i=s.querySelector(this.wz_content);"FORM"!==i.tagName&&(t=i.getAttribute("class"),e=i.innerHTML,i.remove(),(i=document.createElement("form")).setAttribute("method","POST"),i.setAttribute("class",t+" "+this.wz_form.replace(".","")),i.innerHTML=e,s.appendChild(i))}checkForm(){var t=document.querySelector(this.wz_class).querySelector(this.wz_content),e=t.querySelectorAll(this.wz_step)[this.getCurrentStep()].querySelectorAll("input, textarea, select");return 0<e.length?this.formValidator(t,e):{error:!1}}setNav(e){let t=e.querySelector(this.wz_nav);if(t&&this.nav&&(t.remove(),t=null),!t&&this.nav){let t=e.querySelector(this.wz_content).querySelectorAll(this.wz_step),i=document.createElement("aside");i.classList.add(this.wz_nav.replace(".","")),t.forEach((t,e)=>{var s=document.createElement("div"),t=t.getAttribute("data-wz-title")||this.i18n.title+" "+e,e=(s.classList.add(this.wz_step.replace(".","")),"buttons"===this.navigation&&s.classList.add("nav-buttons"),document.createElement("span")),e=(e.classList.add("dot"),s.appendChild(e),document.createElement("span"));e.innerHTML=t,s.appendChild(e),i.appendChild(s)}),e.prepend(i)}}setButtons(){var e=document.querySelector(this.wz_class);let t=e.querySelector(this.wz_buttons);if(t&&this.buttons&&(t.remove(),t=null),!t&&this.buttons){let t=document.createElement("aside");t.classList.add(this.wz_buttons.replace(".",""));var s=this.wz_button_style.replace(/\./g,"").split(" "),i=document.createElement("button"),n=(i.innerHTML=this.prev,i.classList.add(this.wz_button.replace(".",""),...s,this.wz_prev.replace(".","")),"nav"===this.navigation&&(i.style.display="none"),t.appendChild(i),document.createElement("button")),r=(n.innerHTML=this.next,n.classList.add(this.wz_button.replace(".",""),...s,this.wz_next.replace(".","")),"nav"===this.navigation&&(n.style.display="none"),t.appendChild(n),document.createElement("button"));r.innerHTML=this.finish,r.classList.add(this.wz_button.replace(".",""),...s,this.wz_finish.replace(".","")),t.appendChild(r),this.checkButtons(n,i,r),e.appendChild(t)}}checkButtons(t,e,s){var i=this.getCurrentStep(),n=this.steps-1;0===i?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),i===n?(t.setAttribute("disabled","true"),s.style.display="block"):(s.style.display="none",t.removeAttribute("disabled"))}checkAndPrepare(t){this.setNav(t);var e=t.querySelector(this.wz_content);if(!e)throw new Error(this.i18n.empty_content);e=e.querySelectorAll(this.wz_step);if(!e.length)throw new Error(this.i18n.empty_content);let s,i;if(this.nav){if(!(s=t.querySelector(this.wz_nav)))throw new Error(this.i18n.empty_nav);if(!(i=s.querySelectorAll(this.wz_step)).length)throw new Error(this.i18n.empty_nav);if(i.length!==e.length)throw new Error(this.i18n.diff_steps)}this.steps=e.length,this.prefabSteps(e,s,i)}onClick(a){let o=document.querySelector(this.wz_class);if(this.locked&&this.locked_step===this.getCurrentStep())o.dispatchEvent(new Event("wz.lock",{bubbles:this.bubbles}));else{let n=a.closest(this.wz_class),t=n.querySelector(this.wz_nav),e=n.querySelector(this.wz_content),s=a.classList.contains(this.wz_button.replace(".","")),i=a.classList.contains(this.wz_step.replace(".","")),r=a.getAttribute("data-wz-step");r=null!==r?parseInt(r):this.getCurrentStep(),s&&(a.classList.contains(this.wz_prev.replace(".",""))?(--r,o.dispatchEvent(new Event("wz.btn.prev",{bubbles:this.bubbles}))):a.classList.contains(this.wz_next.replace(".",""))&&(r+=1,o.dispatchEvent(new Event("wz.btn.next",{bubbles:this.bubbles}))));var l=r>this.getCurrentStep();if(i&&(l?o.dispatchEvent(new Event("wz.nav.forward",{bubbles:this.bubbles})):r<this.getCurrentStep()&&o.dispatchEvent(new Event("wz.nav.backward",{bubbles:this.bubbles}))),this.form&&"buttons"!==this.navigation&&l&&r!==this.getCurrentStep()+1&&(r=r>=this.last_step?this.last_step:this.getCurrentStep()+1),this.form){let t=this.checkForm();if(t.error&&(l&&o.dispatchEvent(new CustomEvent("wz.error",{bubbles:this.bubbles,detail:{id:"form_validation",msg:this.i18n.form_validation,target:t.target}})),this.last_step=this.getCurrentStep(),this.getCurrentStep()<r))return}if(null!=r&&this.setCurrentStep(r),this.buttons){let t=n.querySelector(this.wz_buttons),e=t.querySelector(""+this.wz_button+this.wz_next),s=t.querySelector(""+this.wz_button+this.wz_prev),i=t.querySelector(""+this.wz_button+this.wz_finish);this.checkButtons(e,s,i)}this.nav&&(t.querySelectorAll(this.wz_step).forEach(t=>t.classList.remove("active")),t.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")),e.querySelectorAll(this.wz_step).forEach(t=>t.classList.remove("active")),e.querySelector(`${this.wz_step}[data-wz-step="${this.getCurrentStep()}"]`).classList.add("active")}}onClickFinish(){this.form?this.checkForm().error||document.querySelector(this.wz_class).dispatchEvent(new Event("wz.form.submit",{bubbles:this.bubbles})):document.querySelector(this.wz_class).dispatchEvent(new Event("wz.end",{bubbles:this.bubbles}))}setCurrentStep(t){this.current_step=this.setStep(t)}getCurrentStep(){return this.current_step}setStep(t){var e=document.querySelector(this.wz_class).querySelector(this.wz_content);return e.querySelector(this.wz_step+`[data-wz-step="${t}"]`)||(e=e.querySelectorAll(this.wz_step).length-1,t=Math.min(e,t)),this.last_step=Math.max(t,this.last_step),parseInt(t,10)}setNavEvent(){document.querySelector(this.wz_class).addEventListener("click",t=>{var e=t.target.closest(this.wz_nav+" "+this.wz_step);e&&(t.preventDefault(),this.onClick(e))})}setBtnEvent(){document.querySelector(this.wz_class).addEventListener("click",t=>{var e=t.target.closest(this.wz_buttons+" "+this.wz_button);e&&(t.preventDefault(),e.classList.contains(this.wz_finish.replace(".",""))?this.onClickFinish():this.onClick(e))})}formValidator(r,t){let s=!1,a=[];return t.forEach(t=>{let i=t.required||t.classList.contains("required");var e=t.classList.contains("on-active-required"),n=t.getAttribute("data-require-if");if(n){let[t,e]=n.split(":"),s=r.querySelector("#"+t);s&&("checkbox"===s.type||"radio"===s.type?s.checked:s.value)===e&&(i=!0)}!i&&!e||this.validateField(t)||(s=!0,a.push(t),this.highlight&&this.highlightElement(t,this.highlight_type.error))}),{error:s,target:a}}validateField(t){switch(t.tagName){case"INPUT":return"checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value.trim();case"SELECT":case"TEXTAREA":return""!==t.value.trim();default:return!0}}highlightElement(t,e){t.classList.add(this.wz_highlight.replace(".",""),e),setTimeout(()=>{t.classList.remove(this.wz_highlight.replace(".",""),e)},this.highlight_time)}},t.default;var i,t,e},"object"==typeof s&&"object"==typeof e?e.exports=n():"function"==typeof define&&define.amd?define("Wizard",[],n):"object"==typeof s?s.Wizard=n():i.Wizard=n()},{}],2:[function(t,e,s){t=(t=t("@adrii_/wizard-js"))&&t.__esModule?t:{default:t};document.addEventListener("wz.ready",function(t){console.log("My body is ready"),console.log("↓ Target ↓"),console.log(t.detail.target),console.log("↓ Elem ↓"),console.log(t.detail.elem)});var i=new t.default({wz_class:".wizard",wz_nav_style:"dots",wz_button_style:".btn .btn-sm .mx-3",wz_ori:"vertical",buttons:!0,navigation:"all",finish:"Save iie!",bubble:!0}),t=(i.init(),document.getElementById("btn_reset").onclick=function(){i.reset()},document.getElementById("btn_lock").onclick=function(){i.lock()},document.getElementById("btn_unlock").onclick=function(){i.unlock()},document.querySelector(".wizard"));t.addEventListener("wz.btn.prev",function(t){console.log("Prev Step")}),t.addEventListener("wz.btn.next",function(t){console.log("Next Step")}),t.addEventListener("wz.nav.forward",function(t){console.log("Forward Nav")}),t.addEventListener("wz.nav.backward",function(t){console.log("Backward Nav")}),t.addEventListener("wz.form.submit",function(t){alert("Form Submit")}),t.addEventListener("wz.end",function(t){alert("Wizard End")}),t.addEventListener("wz.error",function(t){console.log("↓ ID ↓"),console.log(t.detail.id),console.log("↓ Message ↓"),console.log(t.detail.msg)}),t.addEventListener("wz.lock",function(t){alert("Wizard locked")}),t.addEventListener("wz.unlock",function(t){alert("Wizard unlocked")}),t.addEventListener("wz.reset",function(t){document.getElementById("formWizard").reset(),alert("Wizard has restarted")}),t.addEventListener("wz.update",function(t){alert("The Wizard has been updated !"),console.log("↓ Target ↓"),console.log(t.detail.target),console.log("↓ DOM Elem ↓"),console.log(t.detail.elem)}),document.getElementById("btn_append").onclick=function(){var t;t=i,document.querySelector(t.wz_class).querySelector(t.wz_content).querySelector("".concat(t.wz_step,'[data-wz-step="2"]')).insertAdjacentHTML("beforebegin",'<div class="card card-body m-4 wizard-step" data-id="patata" data-title="Adrii"> <label class="question"> Embedded step </label> <input type="text" maxlength="100" name="patata" class="form-control required" placeholder="Embedded step"> </div>'),t.update()}},{"@adrii_/wizard-js":1}]},{},[2]);
//# sourceMappingURL=bundle.js.map
